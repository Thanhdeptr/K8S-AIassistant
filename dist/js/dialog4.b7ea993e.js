(self["webpackChunkui_plugin_examples"]=self["webpackChunkui_plugin_examples"]||[]).push([[4917],{97543:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});var a=t(20641),s=t(90033);const o={class:"text-default-text"},i={class:"pl-10 pr-10"},n={class:"buttons"};function l(e,r,t,l,c,p){const d=(0,a.g2)("Banner"),u=(0,a.g2)("ProjectMemberEditor"),m=(0,a.g2)("AsyncButton"),h=(0,a.g2)("Card"),v=(0,a.gN)("clean-html");return(0,a.uX)(),(0,a.Wv)(h,{class:"prompt-rotate","show-highlight-border":!1,sticky:!0},{title:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("h4",o,null,512),[[v,e.t("addProjectMemberDialog.title")]])])),body:(0,a.k6)((()=>[(0,a.Lk)("div",i,[c.error?((0,a.uX)(),(0,a.Wv)(d,{key:0,color:"error"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(c.error),1)])),_:1})):(0,a.Q3)("",!0),r[4]||(r[4]=(0,a.eW)()),(0,a.bF)(u,{value:c.member,"onUpdate:value":r[0]||(r[0]=e=>c.member=e),"use-two-columns-for-custom":!0},null,8,["value"])])])),actions:(0,a.k6)((()=>[(0,a.Lk)("div",n,[(0,a.Lk)("button",{class:"btn role-secondary mr-10",onClick:r[1]||(r[1]=(...e)=>p.close&&p.close(...e))},(0,s.v_)(e.t("generic.cancel")),1),r[5]||(r[5]=(0,a.eW)()),t.saveInModal?((0,a.uX)(),(0,a.Wv)(m,{key:0,mode:"create",onClick:r[2]||(r[2]=e=>p.saveBindings(e))})):((0,a.uX)(),(0,a.CE)("button",{key:1,class:"btn role-primary",onClick:r[3]||(r[3]=(...e)=>p.apply&&p.apply(...e))},(0,s.v_)(e.t("generic.add")),1))])])),_:1,__:[6,7]})}var c=t(75672),p=t(11276),d=t(97671),u=t(54633),m=t(55823);const h={emits:["close"],components:{Card:c.Z,ProjectMemberEditor:p.A,AsyncButton:d.A,Banner:u.A},props:{resources:{type:Array,required:!0},onAdd:{type:Function,default:()=>{}},projectId:{type:String,default:null},saveInModal:{type:Boolean,default:!1}},data(){return{member:{permissionGroup:"member",custom:{},principalId:"",roleTemplateIds:[]},error:null}},computed:{principal(){const e=this.member.principalId.replace(/\//g,"%2F");return this.$store.dispatch("rancher/find",{type:m.k$.PRINCIPAL,id:this.member.principalId,opt:{url:`/v3/principals/${e}`}},{root:!0})}},methods:{async principalProperty(){const e=await this.principal;return"group"===e?.principalType?"groupPrincipalId":"userPrincipalId"},close(){this.$emit("close")},async apply(){this.onAdd(await this.createBindings()),this.close()},async createBindings(){const e=await this.principalProperty(),r=this.member.roleTemplateIds.map((r=>this.$store.dispatch("rancher/create",{type:m.k$.PROJECT_ROLE_TEMPLATE_BINDING,roleTemplateId:r,[e]:this.member.principalId,projectId:this.projectId})));return Promise.all(r)},saveBindings(e){this.error=null,this.createBindings().then((e=>Promise.all(e.map((e=>e.save()))))).then((()=>{e(!0),setTimeout(this.close,500)})).catch((r=>{this.error=r,e(!1)}))}}};t(64846),t(94620);var v=t(66262);const y=(0,v.A)(h,[["render",l],["__scopeId","data-v-59231971"]]),b=y},16136:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var a=t(31601),s=t.n(a),o=t(76314),i=t.n(o),n=t(5111),l=i()(s());l.i(n.A),l.push([e.id,".prompt-rotate[data-v-59231971]{margin:0}.buttons[data-v-59231971]{display:flex;justify-content:flex-end;width:100%}",""]);const c=l},98778:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var a=t(31601),s=t.n(a),o=t(76314),i=t.n(o),n=t(5111),l=i()(s());l.i(n.A),l.push([e.id,".card-container{border:1px solid var(--border);box-shadow:none}",""]);const c=l},64846:(e,r,t)=>{var a=t(16136);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=t(99548).A;s("24c31c04",a,!0,{sourceMap:!1,shadowMode:!1})},94620:(e,r,t)=>{var a=t(98778);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=t(99548).A;s("0b9f546a",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=dialog4.b7ea993e.js.map