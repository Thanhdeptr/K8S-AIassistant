(self["webpackChunkui_plugin_examples"]=self["webpackChunkui_plugin_examples"]||[]).push([[7734],{99477:(e,t,o)=>{"use strict";o.d(t,{A:()=>k});var s=o(20641),a=o(90033);const r={class:"text-default-text"},n={class:"pl-10 pr-10"};function i(e,t,o,i,l,c){const m=(0,s.g2)("LabeledSelect"),d=(0,s.g2)("KeyValue"),h=(0,s.g2)("Banner"),p=(0,s.g2)("AsyncButton"),u=(0,s.g2)("Card"),v=(0,s.g2)("app-modal"),f=(0,s.gN)("clean-html");return l.showModal?((0,s.uX)(),(0,s.Wv)(v,{key:0,class:"assign-modal",name:"assignTo",styles:"background-color: var(--nav-bg); border-radius: var(--border-radius); max-height: 100vh;",height:"auto",scrollable:!0,onClose:c.close},{default:(0,s.k6)((()=>[l.loaded?((0,s.uX)(),(0,s.Wv)(u,{key:0,"show-highlight-border":!1},{title:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("h4",r,null,512),[[f,e.t("assignTo.title",{count:c.resourceCount},!0)]])])),body:(0,s.k6)((()=>[(0,s.Lk)("div",n,[(0,s.Lk)("form",null,[(0,s.bF)(m,{value:l.moveTo,"onUpdate:value":t[0]||(t[0]=e=>l.moveTo=e),"data-testid":"workspace_options",label:e.t("assignTo.workspace"),options:c.workspaceOptions,placement:"bottom"},null,8,["value","label","options"]),t[3]||(t[3]=(0,s.eW)()),(0,s.bF)(d,{key:"labels",value:l.labels,"onUpdate:value":t[1]||(t[1]=e=>l.labels=e),class:"mt-20","add-label":e.t("labels.addSetLabel"),"read-allowed":!1},null,8,["value","add-label"]),t[4]||(t[4]=(0,s.eW)()),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.errors,((e,t)=>((0,s.uX)(),(0,s.Wv)(h,{key:t,color:"error",label:e},null,8,["label"])))),128))])])])),actions:(0,s.k6)((()=>[(0,s.Lk)("button",{class:"btn role-secondary",onClick:t[2]||(t[2]=(...e)=>c.close&&c.close(...e))},(0,a.v_)(e.t("generic.cancel")),1),t[5]||(t[5]=(0,s.eW)()),(0,s.bF)(p,{mode:"apply",onClick:c.apply},null,8,["onClick"])])),_:1,__:[6,7]})):(0,s.Q3)("",!0)])),_:1},8,["onClose"])):(0,s.Q3)("",!0)}var l=o(66278),c=o(55823),m=o(61172),d=o(83375),h=o(97671),p=o(53818),u=o(75672),v=o(14492),f=o(37447),g=o(6826);const y={components:{Card:u.Z,LabeledSelect:m.A,KeyValue:d.A,AsyncButton:h.A,Banner:v.l,AppModal:p.h},data(){return{errors:[],labels:{},moveTo:this.workspace,loaded:!1,allWorkspaces:[],showModal:!1}},computed:{...(0,l.aH)("action-menu",["showAssignTo","toAssign"]),...(0,l.L8)({t:"i18n/t"}),...(0,l.L8)(["workspace"]),workspaceOptions(){const e=this.allWorkspaces.map((e=>e.metadata?.name)).filter((e=>!!e&&"fleet-local"!==e));return e},resourceCount(){return this.toAssign?.length||0}},watch:{async showAssignTo(e){e?(await this.$store.dispatch("rancher/findAll",{type:c.k$.CLUSTER}),this.allWorkspaces=await this.$store.dispatch("management/findAll",{type:c.Hs.WORKSPACE}),this.moveTo=this.workspace,this.loaded=!0,this.showModal=!0):this.showModal=!1}},methods:{close(){this.errors=[],this.labels={},this.moveTo=this.workspace,this.$store.commit("action-menu/toggleAssignTo")},async apply(e){const t=[];this.errors=[];for(const s of this.toAssign){const e=await this.$store.dispatch("rancher/clone",{resource:s.norman});if(e){e.fleetWorkspaceName=this.moveTo;for(const t of Object.keys(this.labels))e._labels||(0,g.set)(e,"_labels",{}),(0,g.set)(e._labels,t,this.labels[t]);t.push(e.save())}}try{await Promise.all(t),e(!0),this.close()}catch(o){this.errors=(0,f.rz)(o),e(!1)}}}};o(83258);var R=o(66262);const b=(0,R.A)(y,[["render",i]]),k=b},57600:(e,t,o)=>{"use strict";o.d(t,{A:()=>d});var s=o(20641),a=o(90033);const r={key:0,class:"aws-compliance"};function n(e,t,o,n,i,l){return l.awsNotification?((0,s.uX)(),(0,s.CE)("div",r,(0,a.v_)(l.awsNotification.message),1)):(0,s.Q3)("",!0)}var i=o(55823);const l={async fetch(){this.$store.getters["management/schemaFor"](i.Mc.USER_NOTIFICATION)&&(this.notifications=await this.$store.dispatch("management/findAll",{type:i.Mc.USER_NOTIFICATION}))},data(){return{notifications:[]}},computed:{awsNotification(){return this.notifications.find((e=>"csp-adapter"===e.componentName))}}};o(39228);var c=o(66262);const m=(0,c.A)(l,[["render",n],["__scopeId","data-v-28088e40"]]),d=m},29238:(e,t,o)=>{"use strict";o.d(t,{A:()=>$});var s=o(20641),a=o(90033);const r={class:"text-default-text"},n={class:"mb-10"},i={key:2,class:"mt-10"},l={class:"text-warning mb-10 mt-10"},c={class:"text-error mb-10 mt-10"},m={key:0,class:"text-info mt-20"},d={key:1},h={key:0,class:"text-warning mb-10 mt-10"},p={key:1,class:"text-error mb-10 mt-10"};function u(e,t,o,u,v,f){const g=(0,s.g2)("LabeledInput"),y=(0,s.g2)("Checkbox"),R=(0,s.g2)("AsyncButton"),b=(0,s.g2)("Card"),k=(0,s.g2)("app-modal"),w=(0,s.gN)("clean-html"),C=(0,s.gN)("focus");return v.showModal?((0,s.uX)(),(0,s.Wv)(k,{key:0,"custom-class":"remove-modal",name:"promptRemove",width:400,height:"auto",styles:"max-height: 100vh;",onClose:f.close},{default:(0,s.k6)((()=>[(0,s.bF)(b,{class:"prompt-remove","show-highlight-border":!1},{title:(0,s.k6)((()=>[(0,s.Lk)("h4",r,(0,a.v_)(e.t("promptRemove.title")),1)])),body:(0,s.k6)((()=>[(0,s.Lk)("div",n,[v.hasCustomRemove?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.eW)((0,a.v_)(e.t("promptRemove.attemptingToRemove",{type:f.type}))+" ",1),(0,s.bo)((0,s.Lk)("span",null,null,512),[[w,f.resourceNames(f.names,null,e.t)]])],64)),t[5]||(t[5]=(0,s.eW)()),v.hasCustomRemove?((0,s.uX)(),(0,s.Wv)((0,s.$y)(v.removeComponent),(0,s.v6)({key:1,ref:"customPrompt",value:e.toRemove,"onUpdate:value":t[0]||(t[0]=t=>e.toRemove=t)},e.$data,{close:f.close,"needs-confirm":f.needsConfirm,value:e.toRemove,names:f.names,type:f.type,"done-location":f.doneLocation,onErrors:t[1]||(t[1]=e=>v.error=e),onDone:f.done}),null,16,["value","close","needs-confirm","names","type","done-location","onDone"])):(0,s.Q3)("",!0),t[6]||(t[6]=(0,s.eW)()),f.needsConfirm?((0,s.uX)(),(0,s.CE)("div",i,[(0,s.bo)((0,s.Lk)("span",null,null,512),[[w,e.t("promptRemove.confirmName",{nameToMatch:f.escapeHtml(f.nameToMatch)},!0)]])])):(0,s.Q3)("",!0)]),t[10]||(t[10]=(0,s.eW)()),f.needsConfirm?(0,s.bo)(((0,s.uX)(),(0,s.Wv)(g,{key:0,id:"confirm",value:v.confirmName,"onUpdate:value":t[2]||(t[2]=e=>v.confirmName=e),"data-testid":o.componentTestid+"-input",type:"text","aria-label":e.t("promptRemove.confirmName",{nameToMatch:f.escapeHtml(f.nameToMatch)})},{default:(0,s.k6)((()=>[(0,s.Lk)("div",l,(0,a.v_)(v.warning),1),t[7]||(t[7]=(0,s.eW)()),(0,s.Lk)("div",c,(0,a.v_)(v.error),1),t[8]||(t[8]=(0,s.eW)()),f.needsConfirm?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",m,(0,a.v_)(f.protip),1))])),_:1,__:[7,8]},8,["value","data-testid","aria-label"])),[[C]]):v.hasCustomRemove?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",d,[v.warning?((0,s.uX)(),(0,s.CE)("div",h,(0,a.v_)(v.warning),1)):(0,s.Q3)("",!0),t[9]||(t[9]=(0,s.eW)()),v.error?((0,s.uX)(),(0,s.CE)("div",p,(0,a.v_)(v.error),1)):(0,s.Q3)("",!0)])),t[11]||(t[11]=(0,s.eW)()),v.chartsToRemoveIsApp?((0,s.uX)(),(0,s.Wv)(y,{key:2,value:v.chartsDeleteCrd,"onUpdate:value":[t[3]||(t[3]=e=>v.chartsDeleteCrd=e),f.chartAddCrdToRemove],"label-key":"promptRemoveApp.removeCrd",class:"mt-10 type"},null,8,["value","onUpdate:value"])):(0,s.Q3)("",!0)])),actions:(0,s.k6)((()=>[(0,s.Lk)("button",{class:"btn role-secondary",onClick:t[4]||(t[4]=(...e)=>f.close&&f.close(...e))},(0,a.v_)(e.t("generic.cancel")),1),t[12]||(t[12]=(0,s.eW)()),t[13]||(t[13]=(0,s.Lk)("div",{class:"spacer"},null,-1)),t[14]||(t[14]=(0,s.eW)()),(0,s.bF)(R,{mode:"delete",class:"btn bg-error ml-10",disabled:f.deleteDisabled,"data-testid":o.componentTestid+"-confirm-button",onClick:f.remove},null,8,["disabled","data-testid","onClick"])])),_:1,__:[15,16]})])),_:1},8,["onClose"])):(0,s.Q3)("",!0)}var v=o(50953),f=o(66278),g=o(6826),y=o(72140),R=o(75672),b=o(35800),k=o(62606),w=o(65843),C=o(97671),A=o(96676),_=o(55823),T=o(16372),M=o(53818);const L={name:"PromptRemove",components:{Card:R.Z,Checkbox:b.S,AsyncButton:C.A,LabeledInput:T.o,AppModal:M.h},props:{componentTestid:{type:String,default:"prompt-remove"}},data(){const{resource:e}=this.$route.params;return{hasCustomRemove:!1,randomPosition:Math.random(),confirmName:"",error:"",warning:"",preventDelete:!1,removeComponent:(0,v.IJ)(this.$store.getters["type-map/importCustomPromptRemove"](e)),chartsToRemoveIsApp:!1,chartsDeleteCrd:!1,showModal:!1}},computed:{names(){return this.toRemove.map((e=>e.nameDisplay))},nameToMatchPosition(){const e=Math.min(5,this.names.length),t=Math.floor(this.randomPosition*e);return t},nameToMatch(){return this.names[this.nameToMatchPosition]},type(){const e=new Set(this.toRemove.reduce(((e,t)=>(e.push(t.type),e)),[]));if(e.size>1)return this.t("generic.resource",{count:this.toRemove.length});const t=this.toRemove[0]?.schema;return t?this.$store.getters["type-map/labelFor"](t,this.toRemove.length):"resource"+(1===this.toRemove.length?"":"s")},selfLinks(){return this.toRemove.map((e=>(0,g.get)(e,"links.self")))},needsConfirm(){const e=this.toRemove[0];return e?.confirmRemove},doneLocation(){if(this.toRemove.length>1)return null;if(this.toRemove[0].doneOverride)return this.toRemove[0].doneOverride;const e=this.toRemove[0].currentRoute(),t={},o={...e.params};if(o.id&&(o.id===this.toRemove[0]?.metadata?.name||o.id===this.toRemove[0].id)){let{name:s=""}=e;const a=s.indexOf("-id");if(-1!==a&&(s=s.slice(0,a)),o.namespace){const e=s.indexOf("-namespace");-1!==e&&(s=s.slice(0,e)),delete o.namespace}delete o.id,t.params=o,t.name=s}return t},currentRouter(){return this.doneLocation?this.toRemove[0].currentRouter():null},protip(){return this.t("promptRemove.protip",{alternateLabel:k.ZA})},deleteDisabled(){const e=this.needsConfirm&&this.confirmName!==this.nameToMatch;return this.preventDelete||e},...(0,f.aH)("action-menu",["showPromptRemove","toRemove"]),...(0,f.L8)({t:"i18n/t"})},watch:{showPromptRemove(e){if(e){const e=this.toRemove[0];"c-cluster-explorer-tools"===this.currentRouter?.currentRoute?.value?.name&&e.type===_.W8.APP&&e.spec?.chart?.metadata?.annotations[A.W8.AUTO_INSTALL]&&(this.chartsToRemoveIsApp=!0),this.showModal=!0;let{resource:t}=this.$route.params;this.toRemove.length>0&&(t=e.type),this.hasCustomRemove=this.$store.getters["type-map/hasCustomPromptRemove"](t),this.removeComponent=(0,v.IJ)(this.$store.getters["type-map/importCustomPromptRemove"](t))}else this.showModal=!1},toRemove(e){let t;const o=e.filter((e=>e.preventDeletionMessage));if(this.preventDelete=!1,o.length)this.preventDelete=!0,t=o[0].preventDeletionMessage;else{const o=e.filter((e=>e.warnDeletionMessage));o.length&&(t=o[0].warnDeletionMessage)}this.warning="function"===typeof t?t(this.toRemove):t||""}},methods:{resourceNames:y.Nr,escapeHtml:y.ZD,close(){this.confirmName="",this.error="",this.chartsDeleteCrd=!1,this.chartsToRemoveIsApp=!1,this.$store.commit("action-menu/togglePromptRemove")},async remove(e){if(this.doneLocation&&(this.cachedDoneLocation={...this.doneLocation}),this.hasCustomRemove&&this.$refs?.customPrompt?.remove){let t=this.$refs.customPrompt.remove(e);if(t&&t.then)try{t=await t}catch(o){return this.error=o,void e(!1)}if(void 0===t||t)return}const t=this.toRemove.some((e=>e.removeSerially));t?this.serialRemove(e):this.parallelRemove(e)},async serialRemove(e){try{const e=this.getSpoofedTypes(this.toRemove);for(const t of this.toRemove)await t.remove();await this.refreshSpoofedTypes(e),this.done()}catch(t){this.error=t.message||t,e(!1)}},async parallelRemove(e){try{"undefined"!==typeof this.toRemove[0].bulkRemove?await this.toRemove[0].bulkRemove(this.toRemove,{}):await Promise.all(this.toRemove.map((e=>e.remove())));const e=this.getSpoofedTypes(this.toRemove);await this.refreshSpoofedTypes(e),this.done()}catch(t){this.error=t.message||t,e(!1)}},done(){this.cachedDoneLocation&&!(0,g.isEmpty)(this.cachedDoneLocation)&&this.currentRouter.push(this.cachedDoneLocation),this.close()},getSpoofedTypes(e){const t=(0,w.sb)(this.toRemove.map((e=>e.type)));return t.filter(this.$store.getters["type-map/isSpoofed"])},refreshSpoofedTypes(e){const t=this.$store.getters["currentProduct"].inStore,o=e.map((e=>this.$store.dispatch(`${t}/findAll`,{type:e,opt:{force:!0}},{root:!0})));return Promise.all(o)},async chartAddCrdToRemove(){try{const e=await this.toRemove[0].relatedResourcesToRemove();this.toRemove.includes(e)?this.chartsDeleteCrd||this.toRemove.pop(e):this.toRemove.push(e)}catch(e){this.error=e,this.chartsDeleteCrd=!1}}}};o(4413);var x=o(66262);const W=(0,x.A)(L,[["render",u]]),$=W},64414:(e,t,o)=>{"use strict";o.d(t,{A:()=>u});var s=o(20641),a=o(90033);const r={key:0,id:"azure-warn",class:"banner"};function n(e,t,o,n,i,l){const c=(0,s.g2)("router-link");return l.showWarning?((0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("p",null,[(0,s.eW)((0,a.v_)(e.t("authConfig.azuread.updateEndpoint.banner.message"))+" ",1),(0,s.bF)(c,{to:i.authConfigRoute},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(e.t("authConfig.azuread.updateEndpoint.banner.linkText")),1)])),_:1},8,["to"])])])):(0,s.Q3)("",!0)}var i=o(55823),l=o(6826),c=o(96676),m=o(21616);const d={async fetch(){this.$store.getters["isRancher"]&&this.$store.getters["management/schemaFor"](i.Mc.AUTH_CONFIG)&&(this.authConfig=await this.$store.dispatch("rancher/find",{type:i.k$.AUTH_CONFIG,id:"azuread",opt:{url:`/v3/${i.k$.AUTH_CONFIG}/azuread`}}))},data(){return{authConfig:null,authConfigRoute:{name:"c-cluster-auth-config-id",params:{cluster:this.$route.params.cluster||m.w,id:"azuread"}}}},computed:{showWarning(){return!!this.authConfig&&("true"!==(0,l.get)(this.authConfig,`annotations."${c.wk}"`)&&this.authConfig.enabled)}}};o(94407);var h=o(66262);const p=(0,h.A)(d,[["render",n],["__scopeId","data-v-15d074d2"]]),u=p},6092:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c});var s=o(31601),a=o.n(s),r=o(76314),n=o.n(r),i=o(5111),l=n()(a());l.i(i.A),l.push([e.id,".assign-modal{border-radius:var(--border-radius);overflow:scroll;max-height:100vh}.assign-modal ::-webkit-scrollbar-corner{background:transparent}",""]);const c=l},34610:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c});var s=o(31601),a=o.n(s),r=o(76314),n=o.n(r),i=o(5111),l=n()(a());l.i(i.A),l.push([e.id,".aws-compliance[data-v-28088e40]{background-color:var(--error);color:var(--error-text);line-height:2em;width:100%}.aws-compliance[data-v-28088e40],.aws-compliance>p[data-v-28088e40]{text-align:center}",""]);const c=l},70307:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c});var s=o(31601),a=o.n(s),r=o(76314),n=o.n(r),i=o(5111),l=n()(a());l.i(i.A),l.push([e.id,".prompt-remove.card-container{box-shadow:none}.prompt-remove #confirm{width:90%;margin-left:3px}.prompt-remove .actions{text-align:right}.prompt-remove .card-actions{display:flex}.prompt-remove .card-actions .spacer{flex:1}",""]);const c=l},65782:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c});var s=o(31601),a=o.n(s),r=o(76314),n=o.n(r),i=o(5111),l=n()(a());l.i(i.A),l.push([e.id,"#azure-warn[data-v-15d074d2]{background-color:var(--warning);color:var(--warning-text);line-height:2em;width:100%}#azure-warn>p[data-v-15d074d2]{text-align:center}",""]);const c=l},83258:(e,t,o)=>{var s=o(6092);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var a=o(99548).A;a("28b7410c",s,!0,{sourceMap:!1,shadowMode:!1})},39228:(e,t,o)=>{var s=o(34610);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var a=o(99548).A;a("68059c0c",s,!0,{sourceMap:!1,shadowMode:!1})},4413:(e,t,o)=>{var s=o(70307);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var a=o(99548).A;a("c27d040a",s,!0,{sourceMap:!1,shadowMode:!1})},94407:(e,t,o)=>{var s=o(65782);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var a=o(99548).A;a("462cddf8",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=7734.1620604e.js.map