(self["webpackChunkui_plugin_examples"]=self["webpackChunkui_plugin_examples"]||[]).push([[7320],{57320:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>G});var s=t(20641),l=t(90033);const o={key:2,class:"fleet-empty-dashboard"},r={class:"mb-30"},i=["href"],d={class:"mb-30"},n={key:3,class:"fleet-dashboard-data"},c={class:"title"},p={key:0,class:"title-footnote"},u={key:0},g={class:"header-icons"},b={key:0},f={key:0};function h(e,a,t,h,v,k){const m=(0,s.g2)("Loading"),C=(0,s.g2)("FleetNoWorkspaces"),y=(0,s.g2)("router-link"),x=(0,s.g2)("t"),R=(0,s.g2)("CompoundStatusBadge"),W=(0,s.g2)("ResourceTable"),_=(0,s.g2)("CollapsibleCard");return(0,s.uX)(),(0,s.CE)("div",null,[e.$fetchState.pending?((0,s.uX)(),(0,s.Wv)(m,{key:0})):v.fleetWorkspacesData.length?v.gitRepos.length?((0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("div",c,[(0,s.Lk)("h1",null,[(0,s.bF)(x,{k:"fleet.dashboard.pageTitle"})]),a[9]||(a[9]=(0,s.eW)()),(0,s.Lk)("div",null,[k.areAllCardsExpanded?((0,s.uX)(),(0,s.CE)("p",{key:0,onClick:a[0]||(a[0]=e=>k.toggleAll("collapse"))},(0,l.v_)(e.t("fleet.dashboard.collapseAll")),1)):((0,s.uX)(),(0,s.CE)("p",{key:1,onClick:a[1]||(a[1]=e=>k.toggleAll("expand"))},(0,l.v_)(e.t("fleet.dashboard.expandAll")),1))])]),a[23]||(a[23]=(0,s.eW)()),k.emptyWorkspaces.length?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.Lk)("p",null,(0,l.v_)(e.t("fleet.dashboard.thereIsMore",{count:k.emptyWorkspaces.length}))+": ",1),a[10]||(a[10]=(0,s.eW)()),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(k.emptyWorkspaces,((e,a)=>((0,s.uX)(),(0,s.CE)("p",{key:a},[(0,s.eW)((0,l.v_)(e.nameDisplay),1),a!=k.emptyWorkspaces.length-1?((0,s.uX)(),(0,s.CE)("span",u,", ")):(0,s.Q3)("",!0)])))),128))])):(0,s.Q3)("",!0),a[24]||(a[24]=(0,s.eW)()),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(k.workspacesData,((t,o)=>((0,s.uX)(),(0,s.Wv)(_,{key:o,class:"mt-20 mb-40",title:`${e.t("resourceDetail.masthead.workspace")}: ${t.nameDisplay}`,"is-collapsed":v.isCollapsed[t.id],"is-title-clickable":!0,"data-testid":`collapsible-card-${t.id}`,onToggleCollapse:e=>k.toggleCollapse(e,t.id),onTitleClick:e=>k.setWorkspaceFilterAndLinkToGitRepo(t.id)},{"header-right":(0,s.k6)((()=>[(0,s.Lk)("div",g,[(0,s.Lk)("p",null,[a[11]||(a[11]=(0,s.Lk)("i",{class:"icon icon-repository"},null,-1)),a[12]||(a[12]=(0,s.eW)()),(0,s.Lk)("span",null,[(0,s.eW)((0,l.v_)(e.t("tableHeaders.repositories"))+": ",1),(0,s.Lk)("span",null,(0,l.v_)(t.counts.gitRepos),1)])]),a[17]||(a[17]=(0,s.eW)()),(0,s.Lk)("p",null,[a[13]||(a[13]=(0,s.Lk)("i",{class:"icon icon-storage"},null,-1)),a[14]||(a[14]=(0,s.eW)()),(0,s.Lk)("span",null,[(0,s.eW)((0,l.v_)(e.t("tableHeaders.clusters"))+": ",1),(0,s.Lk)("span",null,(0,l.v_)(t.counts.clusters),1)])]),a[18]||(a[18]=(0,s.eW)()),(0,s.Lk)("p",null,[a[15]||(a[15]=(0,s.Lk)("i",{class:"icon icon-folder"},null,-1)),a[16]||(a[16]=(0,s.eW)()),(0,s.Lk)("span",null,[(0,s.eW)((0,l.v_)(e.t("tableHeaders.clusterGroups"))+": ",1),(0,s.Lk)("span",null,(0,l.v_)(t.counts.clusterGroups),1)])])])])),content:(0,s.k6)((()=>[(0,s.bF)(W,{schema:v.schema,headers:v.headers,rows:t.repos,"key-field":"_key",search:!1,"table-actions":!1},{"cell:clustersReady":(0,s.k6)((({row:e})=>["namespace"===t.type?((0,s.uX)(),(0,s.CE)("span",b," - ")):((0,s.uX)(),(0,s.Wv)(R,{key:1,"data-testid":"clusters-ready","tooltip-text":k.getTooltipInfo("clusters",e,k.gitReposCounts),"badge-class":k.getStatusInfo("clusters",e,k.gitReposCounts).badgeClass,icon:k.getStatusInfo("clusters",e,k.gitReposCounts).icon,value:k.getBadgeValue("clusters",e,k.gitReposCounts)},null,8,["tooltip-text","badge-class","icon","value"]))])),"cell:bundlesReady":(0,s.k6)((({row:e})=>["namespace"===t.type?((0,s.uX)(),(0,s.CE)("span",f," - ")):((0,s.uX)(),(0,s.Wv)(R,{key:1,"data-testid":"bundles-ready","tooltip-text":k.getTooltipInfo("bundles",e,k.gitReposCounts),"badge-class":k.getStatusInfo("bundles",e,k.gitReposCounts).badgeClass,icon:k.getStatusInfo("bundles",e,k.gitReposCounts).icon,value:k.getBadgeValue("bundles",e,k.gitReposCounts)},null,8,["tooltip-text","badge-class","icon","value"]))])),"cell:resourcesReady":(0,s.k6)((({row:e})=>[(0,s.bF)(R,{"data-testid":"resources-ready","tooltip-text":k.getTooltipInfo("resources",e,k.gitReposCounts),"badge-class":k.getStatusInfo("resources",e,k.gitReposCounts).badgeClass,icon:k.getStatusInfo("resources",e,k.gitReposCounts).icon,value:k.getBadgeValue("resources",e,k.gitReposCounts)},null,8,["tooltip-text","badge-class","icon","value"])])),"cell:target":(0,s.k6)((({row:e})=>[(0,s.eW)((0,l.v_)(e.targetInfo.modeDisplay),1)])),_:2,__:[19,20,21]},1032,["schema","headers","rows"])])),_:2,__:[22]},1032,["title","is-collapsed","data-testid","onToggleCollapse","onTitleClick"])))),128))])):((0,s.uX)(),(0,s.CE)("div",o,[a[5]||(a[5]=(0,s.Lk)("i",{class:"icon-fleet mb-30"},null,-1)),a[6]||(a[6]=(0,s.eW)()),(0,s.Lk)("h1",null,(0,l.v_)(e.t("fleet.dashboard.welcome")),1),a[7]||(a[7]=(0,s.eW)()),(0,s.Lk)("p",r,[(0,s.Lk)("span",null,(0,l.v_)(e.t("fleet.dashboard.gitOpsScale")),1),a[3]||(a[3]=(0,s.eW)()),(0,s.Lk)("a",{href:e.t("fleet.dashboard.learnMoreLink"),target:"_blank",rel:"noopener noreferrer nofollow"},[(0,s.eW)((0,l.v_)(e.t("fleet.dashboard.learnMore"))+" ",1),a[2]||(a[2]=(0,s.Lk)("i",{class:"icon icon-external-link"},null,-1))],8,i)]),a[8]||(a[8]=(0,s.eW)()),v.permissions.gitRepos?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("h3",d,(0,l.v_)(e.t("fleet.dashboard.noRepo",null,!0)),1),a[4]||(a[4]=(0,s.eW)()),(0,s.bF)(y,{to:v.getStartedLink,class:"btn role-secondary"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.t("fleet.dashboard.getStarted")),1)])),_:1},8,["to"])],64)):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.Wv)(C,{key:1,"can-view":v.permissions.workspaces},null,8,["can-view"]))])}var v=t(66278),k=t(55823),m=t(86691),C=t(33852),y=t(38928);const x={class:"mb-0"},R={class:"collapsible-card-body"};function W(e,a,t,o,r,i){return(0,s.uX)(),(0,s.CE)("div",{class:(0,l.C4)(["collapsible-card",{isCollapsed:t.isCollapsed}])},[(0,s.Lk)("div",{class:"collapsible-card-header",onClick:a[1]||(a[1]=(...e)=>i.toggleCollapse&&i.toggleCollapse(...e))},[(0,s.Lk)("h2",x,[(0,s.Lk)("span",{class:(0,l.C4)({isTitleClickable:t.isTitleClickable}),onClick:a[0]||(a[0]=(...e)=>i.titleClick&&i.titleClick(...e))},(0,l.v_)(t.title),3)]),a[3]||(a[3]=(0,s.eW)()),(0,s.Lk)("div",null,[(0,s.RG)(e.$slots,"header-right",{},void 0,!0),a[2]||(a[2]=(0,s.eW)()),(0,s.Lk)("i",{class:(0,l.C4)(["collapsible-card-collapse-icon",{"icon-chevron-up":!t.isCollapsed,"icon-chevron-down":t.isCollapsed}])},null,2)])]),a[4]||(a[4]=(0,s.eW)()),(0,s.Lk)("div",R,[(0,s.RG)(e.$slots,"content",{},void 0,!0)])],2)}const _={name:"CollapsibleCard",emits:["toggleCollapse","titleClick"],props:{isCollapsed:{type:Boolean,default:!1},title:{type:String,default:""},isTitleClickable:{type:Boolean,default:!1}},methods:{toggleCollapse(){this.$emit("toggleCollapse",!this.isCollapsed)},titleClick(e){this.isTitleClickable&&(e.stopPropagation(),this.$emit("titleClick"))}}};t(54071);var T=t(66262);const L=(0,T.A)(_,[["render",W],["__scopeId","data-v-54332452"]]),A=L;var E=t(1822);function I(e,a,t,o,r,i){const d=(0,s.gN)("clean-tooltip");return(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{class:(0,l.C4)(["compound-cluster-badge",`bg-${t.badgeClass}`])},[t.icon?((0,s.uX)(),(0,s.CE)("i",{key:0,class:(0,l.C4)(`icon-${t.icon}`)},null,2)):(0,s.Q3)("",!0),a[0]||(a[0]=(0,s.eW)()),(0,s.Lk)("span",null,(0,l.v_)(t.value),1)],2)),[[d,t.tooltipText,void 0,{bottom:!0}]])}const S={name:"CompoundStatusBadge",props:{tooltipText:{type:String,default:""},badgeClass:{type:String,default:""},icon:{type:String,default:""},value:{type:String,default:""}}};t(10232);const w=(0,T.A)(S,[["render",I],["__scopeId","data-v-fb72a492"]]),j=w;var $=t(14586),D=t(96676),X=t(65843),N=t(79911),O=t(115),H=t(72140),B=t(96763);const M={name:"FleetDashboard",components:{Loading:y.A,ResourceTable:E.A,CollapsibleCard:A,CompoundStatusBadge:j,FleetNoWorkspaces:N.A},async fetch(){const e=await(0,$.eT)({fleetWorkspaces:{inStoreType:"management",type:k.Hs.WORKSPACE,schemaValidator:e=>!!e?.links?.collection},clusterGroups:{inStoreType:"management",type:k.Hs.CLUSTER_GROUP},allBundles:{inStoreType:"management",type:k.Hs.BUNDLE,opt:{excludeFields:["metadata.managedFields","spec.resources"]}},gitRepos:{inStoreType:"management",type:k.Hs.GIT_REPO},fleetClusters:{inStoreType:"management",type:k.Hs.CLUSTER}},this.$store);this.gitRepos=e.gitRepos,this.fleetWorkspacesData=e.fleetWorkspaces||[];try{const e=await(0,$.RS)({workspaces:{type:k.Hs.WORKSPACE},gitRepos:{type:k.Hs.GIT_REPO,schemaValidator:e=>e.resourceMethods.includes("PUT")}},this.$store.getters);this.permissions=e}catch(a){B.error(a)}},data(){return{admissableAreas:["clusters","bundles","resources"],headers:[{name:"name",labelKey:"tableHeaders.repoName",value:"nameDisplay",sort:["nameSort"],formatter:"LinkDetail",canBeVariable:!0},{name:"clustersReady",labelKey:"tableHeaders.clustersReady",value:"status.readyClusters",sort:"status.readyClusters",search:!1},{name:"bundlesReady",labelKey:"tableHeaders.bundlesReady",value:"status.readyClusters",sort:"status.readyClusters",search:!1},{name:"resourcesReady",labelKey:"tableHeaders.resourcesReady",value:"status.resourceCounts.ready",sort:"status.resourceCounts.ready"}],schema:{},gitRepos:[],fleetWorkspacesData:[],isCollapsed:{},permissions:{},getStartedLink:{name:"c-cluster-product-resource-create",params:{product:O.NAME,resource:k.Hs.GIT_REPO}}}},computed:{...(0,v.aH)(["workspace","allNamespaces"]),fleetWorkspaces(){return this.fleetWorkspacesData?.length?this.fleetWorkspacesData:this.allNamespaces.filter((e=>e.metadata.annotations[D.IY]===m.WORKSPACE)).map((e=>{const a=(0,X.WP)(this.gitRepos,"metadata.namespace",e.id);return{...e,counts:{clusters:"-",clusterGroups:"-",gitRepos:a.length},repos:a,nameDisplay:e.id}}))},workspacesData(){return this.fleetWorkspaces.filter((e=>e.counts.gitRepos>0))},emptyWorkspaces(){return this.fleetWorkspaces.filter((e=>0===e.counts.gitRepos))},areAllCardsExpanded(){return Object.keys(this.isCollapsed).every((e=>!this.isCollapsed[e]))},gitReposCounts(){return this.gitRepos.reduce(((e,a)=>(e[a.id]={bundles:a.allBundlesStatuses,resources:a.allResourceStatuses},e)),{})}},methods:{setWorkspaceFilterAndLinkToGitRepo(e){this.$store.commit("updateWorkspace",{value:e,getters:this.$store.getters}),this.$store.dispatch("prefs/set",{key:m.WORKSPACE,value:e}),this.$router.push({name:"c-cluster-product-resource",params:{product:O.NAME,resource:k.Hs.GIT_REPO}})},getStatusInfo(e,a,t){const s={badgeClass:`${C.xj[C.jv.NOT_READY].color} badge-class-default`,icon:C.xj[C.jv.NOT_READY].compoundIcon};return this.getBadgeClassAndIcon(e,a,t)||s},getBadgeClassAndIcon(e,a,t){if(!this.admissableAreas.includes(e))return!1;let s;if("clusters"===e){const t=a.clusterInfo,s=t.ready===t.total?C.jv.ACTIVE:C.jv.NOT_READY;return{badgeClass:`${C.xj[s].color} badge-class-area-${e}`,icon:C.xj[s].compoundIcon}}if("bundles"===e)s=t[a.id].bundles;else{if("resources"!==e)return!1;s=t[a.id].resources}if(s.total===s.states.ready)return{badgeClass:C.xj[C.jv.ACTIVE].color,icon:C.xj[C.jv.ACTIVE].compoundIcon};const l=(0,C.aB)(s.states);return{badgeClass:C.xj[l].color?C.xj[l].color:`${C.xj[C.jv.UNKNOWN].color} bg-unmapped-state`,icon:C.xj[l].compoundIcon?C.xj[l].compoundIcon:`${C.xj[C.jv.UNKNOWN].compoundIcon} unmapped-icon`}},getTooltipInfo(e,a,t){return this.admissableAreas.includes(e)?"bundles"===e?this.generateTooltipData(t[a.id].bundles.states):"resources"===e?this.generateTooltipData(t[a.id].resources.states):"":{}},generateTooltipData(e){return Object.keys(e).filter((a=>e[a]>0)).map((a=>`${(0,C.C5)(a)}: ${e[a]}<br>`)).join("")},getBadgeValue(e,a,t){let s;if(!this.admissableAreas.includes(e))return"N/A";if("clusters"===e)s=`${a.clusterInfo.ready}/${a.clusterInfo.total}`;else if("bundles"===e){const e=t[a.id].bundles;s=(0,H.TD)(e.states.ready||0,e.total)}else if("resources"===e){const e=t[a.id].resources;s=(0,H.TD)(e.states.ready||0,e.total)}return s},toggleCollapse(e,a){this.isCollapsed[a]=e},toggleAll(e){const a="expand"!==e;Object.keys(this.isCollapsed).forEach((e=>{this.isCollapsed[e]=a}))}},watch:{fleetWorkspaces(e){e?.filter((e=>e.repos?.length)).forEach((e=>{this.isCollapsed[e.id]=!1}))}}};t(94499);const F=(0,T.A)(M,[["render",h],["__scopeId","data-v-75fa849a"]]),G=F},62377:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n});var s=t(31601),l=t.n(s),o=t(76314),r=t.n(o),i=t(5111),d=r()(l());d.i(i.A),d.push([e.id,".collapsible-card[data-v-54332452]{min-width:570px;border-radius:5px;border:1px solid var(--sortable-table-top-divider)}.collapsible-card.isCollapsed .collapsible-card-header[data-v-54332452]{border-bottom:none}.collapsible-card.isCollapsed .collapsible-card-body[data-v-54332452]{visibility:hidden;display:none}.collapsible-card-header[data-v-54332452]{background-color:var(--sortable-table-header-bg);border-bottom:1px solid var(--sortable-table-top-divider);border-top-left-radius:5px;border-top-right-radius:5px;padding:20px;justify-content:space-between;cursor:pointer}.collapsible-card-header[data-v-54332452],.collapsible-card-header h2[data-v-54332452]{display:flex;align-items:center}.collapsible-card-header h2 span.isTitleClickable[data-v-54332452]:hover{text-decoration:underline}.collapsible-card-header>div[data-v-54332452]{display:flex;justify-content:space-between;align-items:center}.collapsible-card-collapse-icon[data-v-54332452]{color:#b7b8bb}.collapsible-card-body[data-v-54332452]{padding:20px;transition:all .25s ease-in-out;visibility:visible;display:block}",""]);const n=d},6598:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n});var s=t(31601),l=t.n(s),o=t(76314),r=t.n(o),i=t(5111),d=r()(l());d.i(i.A),d.push([e.id,".compound-cluster-badge[data-v-fb72a492]{padding:4px 12px;border-radius:16px;display:flex;align-items:center;width:-moz-fit-content;width:fit-content;cursor:default}.compound-cluster-badge i[data-v-fb72a492]{font-size:16px;margin-right:6px}",""]);const n=d},18162:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n});var s=t(31601),l=t.n(s),o=t(76314),r=t.n(o),i=t(5111),d=r()(l());d.i(i.A),d.push([e.id,".fleet-empty-dashboard[data-v-75fa849a]{flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;min-height:100%}.fleet-empty-dashboard .icon-fleet[data-v-75fa849a]{font-size:100px;color:var(--disabled-text)}.fleet-empty-dashboard>p>span[data-v-75fa849a]{color:var(--disabled-text)}.fleet-dashboard-data .title[data-v-75fa849a]{justify-content:space-between;min-height:48px}.fleet-dashboard-data .title[data-v-75fa849a],.fleet-dashboard-data .title>div[data-v-75fa849a]{display:flex;align-items:center}.fleet-dashboard-data .title>div p[data-v-75fa849a]{color:var(--primary)}.fleet-dashboard-data .title>div p[data-v-75fa849a]:hover{text-decoration:underline;cursor:pointer}.fleet-dashboard-data .title-footnote[data-v-75fa849a]{display:flex;align-items:center;color:var(--darker)}.fleet-dashboard-data .header-icons[data-v-75fa849a]{display:flex;align-items:center}.fleet-dashboard-data .header-icons p[data-v-75fa849a]{margin-right:30px;display:flex;align-items:center}.fleet-dashboard-data .header-icons p>span[data-v-75fa849a]{color:var(--disabled-text)}.fleet-dashboard-data .header-icons p>span>span[data-v-75fa849a]{color:var(--body-text)}.fleet-dashboard-data .header-icons p i[data-v-75fa849a]{color:var(--disabled-text);font-size:20px;margin-right:10px}",""]);const n=d},54071:(e,a,t)=>{var s=t(62377);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var l=t(99548).A;l("1429849e",s,!0,{sourceMap:!1,shadowMode:!1})},10232:(e,a,t)=>{var s=t(6598);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var l=t(99548).A;l("3a3ac9a4",s,!0,{sourceMap:!1,shadowMode:!1})},94499:(e,a,t)=>{var s=t(18162);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var l=t(99548).A;l("1bd8ba66",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=7320.8d78d248.js.map