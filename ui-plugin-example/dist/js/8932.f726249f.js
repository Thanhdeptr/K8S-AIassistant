(self["webpackChunkui_plugin_examples"]=self["webpackChunkui_plugin_examples"]||[]).push([[8932],{8243:(e,t,n)=>{"use strict";n.d(t,{A:()=>c,Q:()=>h});var a=n(66278),s=n(55823),r=n(95822),o=n(86226),i=n(10874),l=n(83953);const d=["rancher-csp-adapter","rancher-csp-billing-adapter"],h=e=>e?.find((e=>d.includes(e.metadata?.name))),c={async fetch(){try{this.$store.getters["management/canList"](s.W8.APP)&&(this.apps=await this.$store.dispatch("management/findAll",{type:s.W8.APP}))}catch(e){}try{(0,l.p)()||(0,l.T)(this.$store)}catch(e){}this.haveAppsAndSettings=!!this.apps&&!!this.globalSettings},data(){return{apps:null,haveAppsAndSettings:null}},computed:{...(0,a.L8)({loggedIn:"auth/loggedIn"}),globalSettings(){return this.$store.getters["management/all"](s.Mc.SETTING)},brand(){const e=this.globalSettings?.find((e=>e.id===r.HG.BRAND));return e?.value},color(){const e=this.globalSettings?.find((e=>e.id===r.HG.PRIMARY_COLOR));return e?.value},linkColor(){const e=this.globalSettings?.find((e=>e.id===r.HG.LINK_COLOR));return e?.value},theme(){const e=this.globalSettings?.find((e=>e.id===r.HG.THEME));return e?.value?e?.value:this.$store.getters["prefs/theme"]},cspAdapter(){return this.canCalcCspAdapter?h(this.apps):""},canCalcCspAdapter(){return this.loggedIn&&this.haveAppsAndSettings}},watch:{color:{handler(e){e?this.setCustomColor(e):this.removeCustomColor()},immediate:!0},linkColor:{handler(e){e?this.setCustomColor(e,"link"):this.removeCustomColor("link")},immediate:!0},theme:{handler(){this.color&&this.setCustomColor(this.color),this.linkColor&&this.setCustomColor(this.linkColor,"link"),this.setBodyClass()},immediate:!0},cspAdapter:{handler(e){if(this.canCalcCspAdapter&&e&&!this.brand){const e=this.globalSettings?.find((e=>e.id===r.HG.BRAND));if(e)e.value="csp",e.save();else{const e=this.$store.getters["management/schemaFor"](s.Mc.SETTING),t=e?.linkFor("collection");t&&this.$store.dispatch("management/create",{type:s.Mc.SETTING,metadata:{name:r.HG.BRAND},value:"csp",default:""}).then((e=>e.save()))}}},immediate:!0},brand:{handler(){this.setBodyClass()},immediate:!0}},mounted(){this.setBodyClass(),(0,i.D6)()},methods:{setCustomColor(e,t="primary"){const n=(0,o.Y8)(e,this.theme,t);for(const a in n)document.body.style.setProperty(a,n[a])},removeCustomColor(e="primary"){const t=(0,o.Y8)("rgb(0,0,0)",this.theme,e);for(const n in t)document.body.style.removeProperty(n)},setBodyClass(){const e=document.getElementsByTagName("body")[0],t="overflow-hidden dashboard-body";let a=`theme-${this.theme} ${t}`;if(this.brand)try{const e=n(83029)(`./${this.brand}/metadata.json`);"true"===e?.hasStylesheet?a=`${t} ${this.brand} theme-${this.theme}`:(a=`theme-${this.theme} overflow-hidden dashboard-body`,this.$store.dispatch("prefs/setBrandStyle","dark"===this.theme))}catch{}e.className=a}}}},70230:(e,t,n)=>{"use strict";n.d(t,{H:()=>h,z:()=>d});var a=n(55823);const s="bannerHeader",r="bannerFooter",o="bannerConsent",i={"ui-banner-header":s,"ui-banner-footer":r,"ui-banner-login-consent":o},l={[s]:"showHeader",[r]:"showFooter",[o]:"showConsent"};function d(e){const t={},n=e.getters["management/all"](a.Mc.SETTING);return n.forEach((e=>{if(e.value&&i[e.id]){const n=i[e.id];t[n]=e}})),t}function h(e,t){Object.keys(t).forEach((n=>{try{const a=JSON.parse(t[n].value),s=l[n];e[n]=a,e[s]="true"}catch{}}))}},83953:(e,t,n)=>{"use strict";n.d(t,{T:()=>i,p:()=>o});var a=n(95822),s=n(55823);let r=!1;function o(){return r}function i(e){const t=e.getters["management/byId"](s.Mc.SETTING,a.HG.FAVICON),o=e.getters["management/byId"](s.Mc.SETTING,a.HG.BRAND),i=d(document.head.getElementsByTagName("link"));if(i){let e;"suse"===o?.value?e=n(94520):"csp"===o?.value?e=n(43318):"harvester"===o?.value&&(e=n(80270)),i.href=t?.value||e||h,r=!0}}function l(){const e=d(document.head.getElementsByTagName("link"));return e?e.href:""}function d(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.rel?.includes("icon"))return n}}const h=l()},57750:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var a=n(20641),s=n(90033);const r=["id"],o={key:0},i={key:1,class:"single-row"},l={key:1},d={class:"banner-dialog"},h={key:0},c={key:1,class:"single-row"};function u(e,t,n,u,b,g){return g.showBanner?((0,a.uX)(),(0,a.CE)("div",{key:0,id:g.id},[g.showAsDialog?b.showDialog?((0,a.uX)(),(0,a.CE)("div",l,[t[2]||(t[2]=(0,a.Lk)("div",{class:"banner-dialog-glass"},null,-1)),t[3]||(t[3]=(0,a.eW)()),(0,a.Lk)("div",d,[(0,a.Lk)("div",{class:"banner-dialog-frame",style:(0,s.Tr)(g.dialogStyle)},[(0,a.Lk)("div",{class:"banner",style:(0,s.Tr)(g.bannerStyle)},[g.isTextAnArray?((0,a.uX)(),(0,a.CE)("div",h,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(b.banner.text,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"array-row"},(0,s.v_)(e),1)))),128))])):((0,a.uX)(),(0,a.CE)("div",c,(0,s.v_)(b.banner.text),1))],4),t[1]||(t[1]=(0,a.eW)()),(0,a.Lk)("button",{class:"btn role-primary",onClick:t[0]||(t[0]=e=>g.hideDialog())},(0,s.v_)(b.banner.button),1)],4)])])):(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,s.C4)(["banner",{"banner-consent":n.consent}]),"data-testid":"fixed__banner",style:(0,s.Tr)(g.bannerStyle)},[g.isTextAnArray?((0,a.uX)(),(0,a.CE)("div",o,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(b.banner.text,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"array-row"},(0,s.v_)(e),1)))),128))])):((0,a.uX)(),(0,a.CE)("div",i,(0,s.v_)(b.banner.text),1))],6))],8,r)):(0,a.Q3)("",!0)}var b=n(55823),g=n(95822),m=n(62193),p=n.n(m),f=n(70230);const v={props:{header:{type:Boolean,default:!1},consent:{type:Boolean,default:!1},footer:{type:Boolean,default:!1}},data(){return{showDialog:!0,showHeader:!1,showFooter:!1,showConsent:!1,banner:{}}},methods:{hideDialog(){this.showDialog=!1},handleLineBreaksConsentText(e){if(e.text?.length){const t=e.text.split("\n").filter((e=>e));t.length>1&&(t.forEach(((e,n)=>{t[n]=e.trim()})),e.text=t)}return e}},computed:{uiBannerIndividual(){return(0,f.z)(this.$store)},bannerSetting(){return this.$store.getters["management/all"](b.Mc.SETTING).find((e=>e.id===g.HG.BANNERS))},bannerStyle(){return{color:this.banner.color,"background-color":this.banner.background,"text-align":this.banner.textAlignment,"font-weight":this.banner.fontWeight?"bold":"","font-style":this.banner.fontStyle?"italic":"","font-size":this.banner.fontSize,"text-decoration":this.banner.textDecoration?"underline":""}},dialogStyle(){return{color:this.banner.color,"background-color":this.banner.background}},showBanner(){return!(!this.banner?.text&&!this.banner?.background)&&(this.header?this.showHeader:this.consent?this.showConsent:this.footer?this.showFooter:null)},isTextAnArray(){return Array.isArray(this.banner?.text)},showAsDialog(){return this.consent&&!!this.banner.button},id(){return this.header?"banner-header":this.consent?"banner-consent":this.footer?"banner-footer":"banner"}},watch:{bannerSetting:{deep:!0,handler(e){if(e?.value&&""!==e.value)try{const t=JSON.parse(e.value);(0,f.H)(t,this.uiBannerIndividual);const{bannerHeader:n,bannerFooter:a,bannerConsent:s,banner:r,showHeader:o,showFooter:i,showConsent:l}=t;let d=t?.banner||{};p()(r)&&(d=o&&this.header?this.handleLineBreaksConsentText(n)||{}:l&&this.consent?this.handleLineBreaksConsentText(s)||{}:i&&this.footer&&this.handleLineBreaksConsentText(a)||{}),this.showHeader="true"===o,this.showFooter="true"===i,this.showConsent="true"===l,this.banner=d}catch{}},immediate:!0}}};n(92589);var y=n(66262);const C=(0,y.A)(v,[["render",u],["__scopeId","data-v-45ab2040"]]),w=C},38147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var a=n(31601),s=n.n(a),r=n(76314),o=n.n(r),i=n(5111),l=o()(s());l.i(i.A),l.push([e.id,".banner[data-v-45ab2040]{text-align:center;line-height:2em;width:100%;padding:0 20px}.banner.banner-consent[data-v-45ab2040]{height:unset;min-height:2em;overflow:hidden}.banner-dialog[data-v-45ab2040],.banner-dialog-glass[data-v-45ab2040]{position:absolute;top:0;left:0;width:100vw;height:100vh}.banner-dialog-glass[data-v-45ab2040]{z-index:5000;background-color:var(--default);opacity:.75}.banner-dialog[data-v-45ab2040]{z-index:5001;display:flex;align-items:center;justify-content:center}.banner-dialog .banner-dialog-frame[data-v-45ab2040]{border:2px solid var(--border);display:flex;align-items:center;flex-direction:column;padding:20px;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;min-width:50%;max-width:80%;max-height:90%}.banner-dialog .banner-dialog-frame .banner[data-v-45ab2040]{height:auto;overflow-y:auto}.banner-dialog .banner-dialog-frame button[data-v-45ab2040]{margin-top:10px;max-width:50%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:-moz-fit-content;width:fit-content}",""]);const d=l},92589:(e,t,n)=>{var a=n(38147);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=n(99548).A;s("b88fe502",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=8932.f726249f.js.map