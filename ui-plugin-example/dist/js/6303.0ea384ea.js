(self["webpackChunkui_plugin_examples"]=self["webpackChunkui_plugin_examples"]||[]).push([[6303],{6756:(a,e,t)=>{"use strict";t.d(e,{A:()=>s});const s={data(){return{backLink:null}},beforeRouteEnter(a,e,t){t((a=>{(Object.keys(e.params).length||"home"===e.name)&&(a.backLink=e)}))}}},86483:(a,e,t)=>{"use strict";t.d(e,{A:()=>d});var s=t(20641),n=t(90033);function r(a,e,t,r,l,i){const o=(0,s.g2)("router-link");return t.link&&t.link.name?((0,s.uX)(),(0,s.Wv)(o,{key:0,to:t.link,class:"back-link",role:"link","aria-label":a.t("generic.back")},{default:(0,s.k6)((()=>[e[0]||(e[0]=(0,s.Lk)("i",{class:"icon icon-chevron-left"},null,-1)),(0,s.eW)(" "+(0,n.v_)(a.t("generic.back")),1)])),_:1,__:[0]},8,["to","aria-label"])):((0,s.uX)(),(0,s.Wv)(o,{key:1,to:"/",class:"back-link","aria-label":a.t("nav.home")},{default:(0,s.k6)((()=>[e[1]||(e[1]=(0,s.Lk)("i",{class:"icon icon-chevron-left"},null,-1)),(0,s.eW)(" "+(0,n.v_)(a.t("nav.home")),1)])),_:1,__:[1]},8,["aria-label"]))}const l={props:{link:{type:Object,default:null}}};t(16229);var i=t(66262);const o=(0,i.A)(l,[["render",r],["__scopeId","data-v-0df7548a"]]),d=o},36303:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>R});var s=t(20641),n=t(90033);const r={key:1},l={class:"account"},i=["aria-label"],o={class:"keys-header"},d={class:"api-url"},c=["aria-label"],p={key:0,class:"keys"},u={key:1};function h(a,e,t,h,f,y){const b=(0,s.g2)("Loading"),k=(0,s.g2)("BackLink"),v=(0,s.g2)("TabTitle"),g=(0,s.g2)("Principal"),m=(0,s.g2)("PromptChangePassword"),w=(0,s.g2)("CopyToClipboardText"),_=(0,s.g2)("ResourceTable"),x=(0,s.g2)("Banner"),A=(0,s.gN)("t");return a.$fetchState.pending?((0,s.uX)(),(0,s.Wv)(b,{key:0})):((0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(k,{link:a.backLink},null,8,["link"]),e[6]||(e[6]=(0,s.eW)()),(0,s.Lk)("h1",null,[(0,s.bF)(v,{breadcrumb:"vendor-only"},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(a.t("accountAndKeys.title")),1)])),_:1})]),e[7]||(e[7]=(0,s.eW)()),(0,s.bo)((0,s.Lk)("h2",null,null,512),[[A,"accountAndKeys.account.title"]]),e[8]||(e[8]=(0,s.eW)()),(0,s.Lk)("div",l,[(0,s.bF)(g,{value:y.principal.id,"use-muted":!1,"show-labels":!0},null,8,["value"]),e[2]||(e[2]=(0,s.eW)()),(0,s.Lk)("div",null,[f.canChangePassword?((0,s.uX)(),(0,s.CE)("button",{key:0,role:"button","aria-label":a.t("accountAndKeys.account.change"),type:"button",class:"btn role-primary","data-testid":"account_change_password",onClick:e[0]||(e[0]=e=>a.$refs.promptChangePassword.show(!0))},(0,n.v_)(a.t("accountAndKeys.account.change")),9,i)):(0,s.Q3)("",!0)])]),e[9]||(e[9]=(0,s.eW)()),(0,s.bF)(m,{ref:"promptChangePassword"},null,512),e[10]||(e[10]=(0,s.eW)()),e[11]||(e[11]=(0,s.Lk)("hr",null,null,-1)),e[12]||(e[12]=(0,s.eW)()),(0,s.Lk)("div",o,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("h2",null,null,512),[[A,"accountAndKeys.apiKeys.title"]]),e[4]||(e[4]=(0,s.eW)()),(0,s.Lk)("div",d,[(0,s.Lk)("span",null,(0,n.v_)(a.t("accountAndKeys.apiKeys.apiEndpoint")),1),e[3]||(e[3]=(0,s.eW)()),(0,s.bF)(w,{text:y.apiUrl},null,8,["text"])])]),e[5]||(e[5]=(0,s.eW)()),y.apiKeySchema?((0,s.uX)(),(0,s.CE)("button",{key:0,role:"button","aria-label":a.t("accountAndKeys.apiKeys.add.label"),class:"btn role-primary add mb-20","data-testid":"account_create_api_keys",onClick:e[1]||(e[1]=(...a)=>y.addKey&&y.addKey(...a))},(0,n.v_)(a.t("accountAndKeys.apiKeys.add.label")),9,c)):(0,s.Q3)("",!0)]),e[13]||(e[13]=(0,s.eW)()),y.apiKeySchema?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.bF)(_,{schema:y.apiKeySchema,rows:y.apiKeys,headers:y.apiKeyheaders,"key-field":"id","data-testid":"api_keys_list",search:!0,"row-actions":!0,"table-actions":!0},null,8,["schema","rows","headers"])])):((0,s.uX)(),(0,s.CE)("div",u,[(0,s.bF)(x,{color:"warning",label:a.t("accountAndKeys.apiKeys.notAllowed")},null,8,["label"])]))]))}var f=t(86483),y=t(53751);const b={class:"text-default-text"},k=["aria-label"];function v(a,e,t,r,l,i){const o=(0,s.g2)("ChangePassword"),d=(0,s.g2)("AsyncButton"),c=(0,s.g2)("Card"),p=(0,s.g2)("app-modal");return l.showModal?((0,s.uX)(),(0,s.Wv)(p,{key:0,"custom-class":"change-password-modal","data-testid":"change-password__modal",name:"password-modal",width:500,height:465,"trigger-focus-trap":!0,onClose:e[3]||(e[3]=a=>i.show(!1))},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"prompt-password","show-highlight-border":!1},{title:(0,s.k6)((()=>[(0,s.Lk)("h4",b,(0,n.v_)(a.t("changePassword.title")),1)])),body:(0,s.k6)((()=>[(0,s.Lk)("form",{onSubmit:e[1]||(e[1]=(0,y.D$)((()=>{}),["prevent"]))},[(0,s.bF)(o,{ref:"changePassword",onValid:e[0]||(e[0]=a=>l.valid=a)},null,512)],32)])),actions:(0,s.k6)((()=>[(0,s.Lk)("button",{class:"btn role-secondary",role:"button","aria-label":a.t("changePassword.cancel"),type:"reset",onClick:e[2]||(e[2]=a=>i.show(!1))},(0,n.v_)(a.t("changePassword.cancel")),9,k),e[4]||(e[4]=(0,s.eW)()),(0,s.bF)(d,{type:"submit",mode:"apply",class:"btn bg-error ml-10",disabled:!l.valid,value:"LOGIN",onClick:i.submit},null,8,["disabled","onClick"])])),_:1,__:[5,6]})])),_:1})):(0,s.Q3)("",!0)}var g=t(66278),m=t(87926),w=t(75672),_=t(97671),x=t(53818);const A={components:{Card:w.Z,AsyncButton:_.A,ChangePassword:m.A,AppModal:x.h},data(){return{valid:!1,password:"",showModal:!1}},computed:{...(0,g.L8)({t:"i18n/t"})},methods:{show(a){this.showModal=!!a},async submit(a){try{await this.$refs.changePassword.save(),this.show(!1),a(!0)}catch(e){a(!1)}}}};t(26475);var C=t(66262);const K=(0,C.A)(A,[["render",v],["__scopeId","data-v-2fb4ef3c"]]),L=K;var $=t(55823),P=t(95822),S=t(38928),W=t(67907),T=t(6756),M=t(14492),E=t(1822),F=t(17657),I=t(95753),U=t(96763);const X="/v3",B={components:{CopyToClipboardText:F.A,BackLink:f.A,Banner:M.l,PromptChangePassword:L,Loading:S.A,ResourceTable:E.A,Principal:W.A,TabTitle:I.A},mixins:[T.A],async fetch(){this.canChangePassword=await this.calcCanChangePassword(),this.apiKeySchema&&(this.rows=await this.$store.dispatch("rancher/findAll",{type:$.k$.TOKEN}));const a=await this.$store.dispatch("management/findAll",{type:$.Mc.SETTING}),e=a.find((a=>a.id===P.HG.API_HOST)),t=a.find((a=>a.id===P.HG.SERVER_URL));this.apiHostSetting=e?.value,this.serverUrlSetting=t?.value},data(){return{apiHostSetting:null,serverUrlSetting:null,rows:null,canChangePassword:!1}},computed:{...(0,g.L8)({t:"i18n/t"}),apiKeyheaders(){return this.apiKeySchema?this.$store.getters["type-map/headersFor"](this.apiKeySchema):[]},apiUrlBase(){let a=this.apiHostSetting;a&&0!==a.indexOf("http")&&(a=`http://${a}`);let e=a||this.serverUrlSetting;return 0!==e.indexOf("http")&&(e=`${window.location.origin}/${e.replace(/^\/+/,"")}`),e=`${e.replace(/\/+$/,"")}/`,e},apiUrl(){const a=this.apiUrlBase,e=X.replace(/^\/+/,"");return`${a}${e}`},apiKeySchema(){try{return this.$store.getters["rancher/schemaFor"]($.k$.TOKEN)}catch(a){}return null},principal(){const a=this.$store.getters["auth/principalId"],e=this.$store.getters["rancher/byId"]($.k$.PRINCIPAL,a);return e||U.error("Failed to find principal with id: ",a),e||{}},apiKeys(){const a=a=>{const e=a.labels,t=a.expired,s=a.current;return(!t||!e||!e["ui-session"])&&!s};return this.rows?this.rows.filter(a):[]}},methods:{addKey(){this.$router.push({name:"account-create-key"})},async calcCanChangePassword(){if(!this.$store.getters["auth/enabled"])return!1;if("local"===this.principal.provider)return!!this.principal.loginName;const a=await this.$store.dispatch("rancher/findAll",{type:$.k$.USER,opt:{url:"/v3/users",filter:{me:!0}}});return!(!a||1!==a.length)&&!!a[0].username}}};t(76958);const O=(0,C.A)(B,[["render",h],["__scopeId","data-v-302a62dc"]]),R=O},77063:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>d});var s=t(31601),n=t.n(s),r=t(76314),l=t.n(r),i=t(5111),o=l()(n());o.i(i.A),o.push([a.id,".back-link[data-v-0df7548a]{align-items:center;display:flex;font-size:16px;margin:10px 0 20px 0;outline:0;width:-moz-fit-content;width:fit-content}.back-link[data-v-0df7548a]:focus-visible{outline:2px solid var(--primary-keyboard-focus)}",""]);const d=o},28321:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>d});var s=t(31601),n=t.n(s),r=t(76314),l=t.n(r),i=t(5111),o=l()(n());o.i(i.A),o.push([a.id,".prompt-password[data-v-2fb4ef3c]  .card-wrap{display:flex;flex-direction:column}.prompt-password[data-v-2fb4ef3c]  .card-wrap .card-body{flex:1;justify-content:start}.prompt-password[data-v-2fb4ef3c]  .card-wrap .card-body>div{flex:1;display:flex}.prompt-password[data-v-2fb4ef3c]  .card-wrap .card-actions{display:flex;justify-content:flex-end;width:100%}.prompt-password[data-v-2fb4ef3c]{flex:1;display:flex}.prompt-password form[data-v-2fb4ef3c]{flex:1}",""]);const d=o},91864:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>d});var s=t(31601),n=t.n(s),r=t(76314),l=t.n(r),i=t(5111),o=l()(n());o.i(i.A),o.push([a.id,"hr[data-v-302a62dc]{margin:20px 0}.account[data-v-302a62dc]{justify-content:space-between}.account[data-v-302a62dc],.keys-header[data-v-302a62dc]{display:flex}.keys-header div[data-v-302a62dc]{flex:1}.keys[data-v-302a62dc]{display:flex;flex-direction:column}.keys .add[data-v-302a62dc]{align-self:flex-end}.api-url[data-v-302a62dc]{display:flex}.api-url>span[data-v-302a62dc]{margin-right:6px}",""]);const d=o},16229:(a,e,t)=>{var s=t(77063);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[a.id,s,""]]),s.locals&&(a.exports=s.locals);var n=t(99548).A;n("02ef7e76",s,!0,{sourceMap:!1,shadowMode:!1})},26475:(a,e,t)=>{var s=t(28321);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[a.id,s,""]]),s.locals&&(a.exports=s.locals);var n=t(99548).A;n("5f3e2140",s,!0,{sourceMap:!1,shadowMode:!1})},76958:(a,e,t)=>{var s=t(91864);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[a.id,s,""]]),s.locals&&(a.exports=s.locals);var n=t(99548).A;n("a084d8e6",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=6303.0ea384ea.js.map