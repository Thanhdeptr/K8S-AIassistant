{"version":3,"file":"js/2444.cd122b99.js","mappings":"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","sources":["webpack://ui-plugin-examples/./node_modules/@rancher/shell/pages/c/_cluster/manager/cloudCredential/index.vue","webpack://ui-plugin-examples/./node_modules/@rancher/shell/pages/c/_cluster/manager/cloudCredential/index.vue?bc87","webpack://ui-plugin-examples/./node_modules/@rancher/shell/pages/c/_cluster/manager/cloudCredential/index.vue?563d","webpack://ui-plugin-examples/./node_modules/@rancher/shell/pages/c/_cluster/manager/cloudCredential/index.vue?5b1f"],"sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport Masthead from '@shell/components/ResourceList/Masthead';\nimport { NORMAN, SECRET } from '@shell/config/types';\nimport {\n  AGE_NORMAN,\n  DESCRIPTION,\n  ID_UNLINKED,\n  NAME_UNLINKED,\n} from '@shell/config/table-headers';\nimport { allHash } from 'utils/promise';\nimport { Banner } from '@components/Banner';\n\nexport default {\n  components: {\n    Loading,\n    ResourceTable,\n    Masthead,\n    Banner\n  },\n\n  async fetch() {\n    const promises = {};\n\n    if (this.$store.getters['management/schemaFor'](SECRET) && !this.$store.getters[`cluster/paginationEnabled`](SECRET)) {\n      // Having secrets allows showing the public portion of more types but not all users can see them.\n      promises.secrets = this.$store.dispatch('management/findAll', { type: SECRET });\n    }\n    promises.allCredentials = this.$store.dispatch('rancher/findAll', { type: NORMAN.CLOUD_CREDENTIAL });\n\n    const hash = await allHash(promises);\n\n    this.allCredentials = hash.allCredentials;\n    // This can be optimized in future to to a quick fetch for those with annotation `\"provisioning.cattle.io/driver\": \"harvester\"`\n    this.hasHarvester = !!this.allCredentials.find((cc) => !!cc.harvestercredentialConfig);\n  },\n\n  data() {\n    return {\n      allCredentials: null,\n      resource:       NORMAN.CLOUD_CREDENTIAL,\n      schema:         this.$store.getters['rancher/schemaFor'](NORMAN.CLOUD_CREDENTIAL),\n    };\n  },\n\n  computed: {\n    rows() {\n      return this.allCredentials || [];\n    },\n\n    headers() {\n      const headers = [\n        ID_UNLINKED,\n        NAME_UNLINKED,\n        {\n          name:      'apikey',\n          labelKey:  'tableHeaders.apikey',\n          value:     'publicData',\n          sort:      'publicData',\n          search:    'publicData',\n          formatter: 'CloudCredPublicData',\n        },\n        DESCRIPTION,\n      ];\n\n      if (this.hasHarvester) {\n        headers.push({\n          name:      'expiresDate',\n          labelKey:  'tableHeaders.expires',\n          value:     'expires',\n          sort:      'expiresForSort',\n          formatter: 'CloudCredExpired',\n        });\n      }\n\n      headers.push(AGE_NORMAN);\n\n      return headers;\n    },\n\n    createLocation() {\n      return {\n        name:   'c-cluster-manager-cloudCredential-create',\n        params: {\n          product:  this.$store.getters['currentProduct'].name,\n          resource: this.resource,\n        },\n      };\n    },\n\n    expiredData() {\n      const counts = this.allCredentials.reduce((res, cc) => {\n        const expireData = cc.expireData;\n\n        if (expireData?.expiring) {\n          res.expiring++;\n        }\n        if (expireData?.expired) {\n          res.expired++;\n        }\n\n        return res;\n      }, {\n        expiring: 0,\n        expired:  0\n      });\n\n      return {\n        expiring: counts.expiring ? this.t('manager.cloudCredentials.banners.expiring', { count: counts.expiring }) : '',\n        expired:  counts.expired ? this.t('manager.cloudCredentials.banners.expired', { count: counts.expired }) : '',\n      };\n    }\n  },\n\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Masthead\n      :schema=\"schema\"\n      :resource=\"resource\"\n      :create-location=\"createLocation\"\n      :type-display=\"t('manager.cloudCredentials.label')\"\n    />\n    <Banner\n      v-if=\"expiredData.expiring\"\n      data-testid=\"cert-expiring-banner\"\n      color=\"warning\"\n      :label=\"expiredData.expiring\"\n    />\n    <Banner\n      v-if=\"expiredData.expired\"\n      color=\"error\"\n      :label=\"expiredData.expired\"\n    />\n\n    <ResourceTable\n      :schema=\"schema\"\n      :rows=\"rows\"\n      :headers=\"headers\"\n      :namespaced=\"false\"\n      group-by=\"providerDisplay\"\n    >\n      <template #cell:id=\"{row}\">\n        {{ row.id.replace('cattle-global-data:', '') }}\n      </template>\n    </ResourceTable>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.banner {\n  margin: 0 0 10px 0\n}\n</style>\n","import { render } from \"./index.vue?vue&type=template&id=7e20a296&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=7e20a296&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../../../vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7e20a296\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../../../../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../../../../../vue-loader/dist/stylePostLoader.js!../../../../../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../../../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../../../../../xterm/css/xterm.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.banner[data-v-7e20a296]{margin:0 0 10px 0}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../../../../../vue-loader/dist/stylePostLoader.js!../../../../../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../../../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../../../../../sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../../../../../cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../../../../../vue-loader/dist/index.js??ruleSet[0].use[1]!./index.vue?vue&type=style&index=0&id=7e20a296&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7db80448\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["$fetchState","schema","resource","createLocation","t","expiredData","color","label","expiring","expired","rows","headers","namespaced","row","id","replace","components","Loading","ResourceTable","Masthead","Banner","fetch","promises","this","$store","getters","secrets","dispatch","type","allCredentials","CLOUD_CREDENTIAL","hash","hasHarvester","find","cc","harvestercredentialConfig","data","computed","name","labelKey","value","sort","search","formatter","push","params","product","counts","reduce","res","expireData","count","__exports__","render","___CSS_LOADER_EXPORT___","i","module","content","__esModule","default","locals","exports","add"],"sourceRoot":""}